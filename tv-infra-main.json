{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json",
    "contentVersion": "1.0.0.0",
    "parameters": {
      "uri": {
        "type": "string"
      },        
      "environment": {
        "type": "string"
      },
      "resourceGroupName": {
        "type": "string"
      },
      "location": {
        "type": "string"
      },
      "nsg-rule": {
        "type": "object"
      },
      "address-prefix": {
        "type": "string"
      },
      "subnet1-address-prefix": {
        "type": "string"
      }    
    },
    "resources": [
        {
            "type": "Microsoft.Resources/deployments",
            "apiVersion": "2021-04-01",
            "name": "tv-infra-entra",
            "properties": {
                "mode": "Incremental",
                "templateLink": {
                "uri": "[concat(parameters('uri'),'tv-infra-entra.json')]"
                },
                "parameters": {
                "resourceGroupName": { "value": "[parameters('resourceGroupName')]" },
                "location": { "value": "[parameters('location')]" }
                }
            }
        },
        {
          "type": "Microsoft.Resources/deployments",
          "apiVersion": "2021-04-01",
          "name": "tv-infra-Vnet",
          "properties": {
            "mode": "Incremental",
            "templateLink": {
              "uri": "[concat(parameters('uri'), 'tv-infra-VirtualNetwork.json')]"
            },
            "parameters": {
              "environment": { "value": "[parameters('environment')]" },
              "resourceGroupName": { "value": "[parameters('resourceGroupName')]" },
              "location": { "value": "[parameters('location')]" },
              "address-prefix": { "value": "[parameters('address-prefix')]" },
              "subnet1-address-prefix": { "value": "[parameters('subnet1-address-prefix')]" },
              "Nsg-rules": { "value": "[parameters('Nsg-rule')]" }
            }
          }
        }
    ]
}